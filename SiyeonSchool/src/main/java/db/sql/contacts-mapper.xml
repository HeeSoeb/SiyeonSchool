<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>

	<!-- 전체카테고리 조회 -->
	<entry key="selectCategoryList">
	   SELECT
		      CATEGORY_NO
		    , CATEGORY_NAME
		 FROM CONTACTS_CATEGORY
		WHERE STATUS = 'Y'
	</entry>
	
	<!-- 개인주소록 조회: OWNER_NO가 가진 개인주소록 조회 -->
	<entry key="selectPrivateContactsList">
		SELECT 
		       C.CONTACTS_NO
		     , C.CONTACTS_NAME
		     , COUNT(CM.CONTACTS_NO) AS "COUNT"
		  FROM CONTACTS "C"
		  LEFT JOIN CONTACTS_MEMBER "CM" ON (C.CONTACTS_NO = CM.CONTACTS_NO)
		 WHERE C.OWNER_NO = ?
		   AND C.CONTACTS_TYPE = 'P'
		   AND C.STATUS = 'Y'
		 GROUP
		    BY C.CONTACTS_NO, 
		       C.CONTACTS_NAME
	</entry>
	
	<!-- 공유주소록 조회: CATEGORY_NO에 속한 공유주소록 조회 -->
	<entry key="selectPublicContactsList">
		SELECT 
		       C.CONTACTS_NO
		     , C.CONTACTS_NAME
		     , COUNT(CM.CONTACTS_NO) AS "COUNT"
		  FROM CONTACTS "C"
		  LEFT JOIN CONTACTS_MEMBER "CM" ON (C.CONTACTS_NO = CM.CONTACTS_NO)
		 WHERE C.CATEGORY_NO = ?
           AND C.CONTACTS_TYPE = 'S'
		   AND C.STATUS = 'Y'
		 GROUP
		    BY C.CONTACTS_NO, 
		       C.CONTACTS_NAME
         ORDER
            BY C.CONTACTS_NO
	</entry>
	
	<!-- 전체사용자 조회 -->
	<entry key="selectAllUsersList">
		SELECT
               USER_NO
             , USER_ID
             , USER_NAME
             , PHONE
             , PHONE_PUBLIC
             , TO_CHAR(BIRTHDAY, 'FMMM"월" DD"일"') "BIRTHDAY"
             , PROFILE_FILE_NO
             , USER_AUTH
		  FROM USERS
		 WHERE STATUS = 'Y' 
		 ORDER
		    BY USER_AUTH, USER_NAME
	</entry>
	
	<!-- 주소록구성원 조회 -->
	<entry key="selectUsersList">
			SELECT
	               USER_NO
	             , USER_ID
	             , USER_NAME
	             , PHONE
	             , PHONE_PUBLIC
	             , TO_CHAR(BIRTHDAY, 'FMMM"월" DD"일"') "BIRTHDAY"
	             , PROFILE_FILE_NO
	             , USER_AUTH
			  FROM USERS
			 WHERE STATUS = 'Y'
	           AND USER_NO IN (SELECT USER_NO
	                             FROM CONTACTS_MEMBER
	                            WHERE CONTACTS_NO = ?)
			 ORDER
			    BY USER_AUTH, USER_NAME
	</entry>

</properties>
